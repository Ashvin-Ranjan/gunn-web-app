function ajax(e,t,n){var a=new XMLHttpRequest;a.onreadystatechange=(()=>{if(4===a.readyState)200===a.status?t(a.responseText):n?n(a.status):0});a.open("GET",e,true);a.send(null)}function toEach(e,t){var n=document.querySelectorAll(e);for(var a=0,o=n.length;a<o;a++)t(n[a],a)}function initMap(){var e=new google.maps.Map(document.getElementById("mapgoogle"),{zoom:18,center:{lat:37.400922,lng:-122.133584}});e.setMapTypeId("satellite");var t={north:37.402294,south:37.398824,east:-122.130923,west:-122.136685};historicalOverlay=new google.maps.GroundOverlay("http://i.imgur.com/cnsWqDz.png",t);historicalOverlay.setMap(e)}window.addEventListener("load",e=>{ripple("#footer > ul > li, button.material");toEach("input[name=theme]",e=>e.addEventListener("click",e=>{if("light"===e.target.value){document.body.classList.remove("dark");document.body.classList.add("light");document.querySelector("input[name=theme][value=light]").checked=true;cookie.setItem("global.theme","light")}else{document.body.classList.remove("light");document.body.classList.add("dark");document.querySelector("input[name=theme][value=dark]").checked=true;cookie.setItem("global.theme","dark")}},false));var t=document.querySelector("#seconds");function n(){var e=new Date;t.innerHTML=("0"+e.getSeconds()).slice(-2);t.style.setProperty("--rotation",`rotate(${6*e.getSeconds()}deg)`);if(0===e.getSeconds()){t.classList.add("notransition");setTimeout(()=>{t.classList.remove("notransition")},300)}setTimeout(n,1010-e.getMilliseconds())}n();var a=document.querySelector("#psadialog .content");ajax(("file:"===window.location.protocol?"https://orbiit.github.io/gunn-web-app/":"")+"psa.html",e=>{document.querySelector("#psa").innerHTML=e;if(localStorage.getItem("[gunn-web-app] scheduleapp.psa")!==e){if(localStorage.getItem("[gunn-web-app] scheduleapp.psa")){a.innerHTML=e;a.parentNode.classList.add("show")}localStorage.setItem("[gunn-web-app] scheduleapp.psa",e)}},e=>{document.querySelector("#psa").innerHTML=`<p>${e}; couldn't get last PSA; maybe you aren't connected to the internet?</p>`+localStorage.getItem("[gunn-web-app] scheduleapp.psa")});zoomImage(document.querySelector("#mapimage"));var o=document.querySelector("#maptoggle");if(window.googleMapsFailed)o.innerHTML=`Google Maps not loading! Maybe you aren't connected to the internet?`;else{o.innerHTML="";var i=document.createElement("button"),r=document.querySelector("#mapimage"),l=document.querySelector("#mapgoogle"),s=false,c=document.createTextNode("");r.style.display="block",l.style.display="none",c.nodeValue="use google maps";i.classList.add("material");ripple(i);i.addEventListener("click",e=>{s=!s;if(s)r.style.display="none",l.style.display="block",c.nodeValue="use the image";else r.style.display="block",l.style.display="none",c.nodeValue="use google maps"},false);i.appendChild(c);o.appendChild(i)}},false);function ripple(e){if("string"===typeof e){var t=document.querySelectorAll(e);for(var n=0;n<t.length;n++)ripple(t[n]);return}function a(t,n){var a=document.createElement("div"),i=e.getBoundingClientRect();a.classList.add("ripple");if(e.classList.contains("ripple-light"))a.classList.add("ripple-light");if(e.classList.contains("ripple-dark"))a.classList.add("ripple-dark");a.style.left=t-i.left+"px";a.style.top=n-i.top+"px";e.appendChild(a);var r=(new Date).getTime(),l=Math.max(i.width,i.height)/10,s=31*l,c=false,d;function u(){var t=((new Date).getTime()-r)/s,n=((new Date).getTime()-d)/500;if(c&&n>1){e.removeChild(a);a=null}else{a.style.transform=`scale(${t*l})`;if(n)a.style.opacity=1-n;else a.style.opacity=1;window.requestAnimationFrame(u)}}function p(e){c=true,d=(new Date).getTime();document.removeEventListener("mouseup",p,false);document.removeEventListener("touchend",p,false);if("touchend"===e.type)o=d}window.requestAnimationFrame(u);document.addEventListener("mouseup",p,false);document.addEventListener("touchend",p,false)}var o=0;e.addEventListener("mousedown",e=>{if((new Date).getTime()-o>100)a(e.clientX,e.clientY)},false);e.addEventListener("touchstart",e=>{a(e.touches[0].clientX,e.touches[0].clientY)},false);var i=document.createElement("div");i.classList.add("ripple");i.classList.add("ripple-focus")}window.addEventListener("load",e=>{toEach(".material-switch",e=>{e.addEventListener("click",t=>{e.classList.toggle("checked")},false)});toEach(".radio-wrapper",e=>{var t=e.querySelector("input[type=radio]");e.addEventListener("click",e=>{t.click();t.focus()},false)});toEach(".material-dialog > .buttons > button.close",e=>{e.addEventListener("click",t=>{e.parentNode.parentNode.classList.remove("show")},false)})},false);window.addEventListener("load",e=>{var t=document.querySelector(`#footer > ul > li[data-section="${cookie.getItem("[gunn-web-app] section")||"schedule"}"]`);if(t)t.classList.add("active");else{document.querySelector(`#footer > ul > li[data-section="schedule"]`).classList.add("active");cookie.setItem("[gunn-web-app] section","schedule");document.body.classList.add("footer-schedule")}var n=document.querySelector("#footer > ul");function a(e){if(e.target!==n&&n.contains(e.target)){var t=n.querySelector(".active");if(t){t.classList.remove("active");document.body.classList.remove("footer-"+t.children[1].textContent.toLowerCase())}var a=e.target;while("LI"!==a.tagName)a=e.target.parentNode;a.classList.add("active");document.body.classList.add("footer-"+a.children[1].textContent.toLowerCase());cookie.setItem("[gunn-web-app] section",a.children[1].textContent.toLowerCase())}}n.addEventListener("click",a,false);n.addEventListener("keydown",e=>{if(13===e.keyCode)a(e)},false)},false);var options,letras=[0,"A","B","C","D","E","F","G","Flex","Brunch","Lunch"],VERSION=1,periodstyles={NO_SCHOOL:{label:"No school today!"},Brunch:{label:"Brunch",colour:"#90a4ae"},Lunch:{label:"Lunch",colour:"#90a4ae"},Flex:{label:"Flex",colour:"#455a64"},A:{label:"Period A",colour:"#f44336"},B:{label:"Period B",colour:"#2196F3"},C:{label:"Period C",colour:"#FFEB3B"},D:{label:"Period D",colour:"#795548"},E:{label:"Period E",colour:"#FF9800"},F:{label:"Period F",colour:"#9C27B0"},G:{label:"Period G",colour:"#4CAF50"}},normalschedule={Monday:[{type:"A",begin:"0825",end:"0945"},{type:"Brunch",begin:"0945",end:"1000"},{type:"B",begin:"1000",end:"1115"},{type:"C",begin:"1125",end:"1240"},{type:"Lunch",begin:"1240",end:"1320"},{type:"F",begin:"1320",end:"1435"}],Tuesday:[{type:"D",begin:"0825",end:"0945"},{type:"Brunch",begin:"0945",end:"1000"},{type:"Flex",begin:"1000",end:"1050"},{type:"E",begin:"1100",end:"1215"},{type:"Lunch",begin:"1215",end:"1255"},{type:"A",begin:"1255",end:"1415"},{type:"G",begin:"1425",end:"1540"}],Wednesday:[{type:"B",begin:"0825",end:"0950"},{type:"Brunch",begin:"0950",end:"1005"},{type:"C",begin:"1005",end:"1125"},{type:"D",begin:"1135",end:"1255"},{type:"Lunch",begin:"1255",end:"1335"},{type:"F",begin:"1335",end:"1455"}],Thursday:[{type:"E",begin:"0825",end:"0950"},{type:"Brunch",begin:"0950",end:"1005"},{type:"Flex",begin:"1005",end:"1055"},{type:"B",begin:"1105",end:"1215"},{type:"Lunch",begin:"1215",end:"1255"},{type:"A",begin:"1255",end:"1405"},{type:"G",begin:"1415",end:"1535"}],Friday:[{type:"C",begin:"0825",end:"0940"},{type:"Brunch",begin:"0940",end:"0955"},{type:"D",begin:"0955",end:"1105"},{type:"E",begin:"1115",end:"1225"},{type:"Lunch",begin:"1225",end:"1305"},{type:"F",begin:"1305",end:"1415"},{type:"G",begin:"1425",end:"1535"}]};if(!window.cookie)try{window.cookie=localStorage}catch(e){window.cookie={getItem(e){return cookie[e]},setItem(e,t){cookie[e]=t},removeItem(e){delete cookie[e]}}}if(cookie.getItem("[gunn-web-app] scheduleapp.options")){options=JSON.parse(cookie.getItem("[gunn-web-app] scheduleapp.options"));if(options[0]!==VERSION)if("string"!==typeof options[0]){options.splice(0,0,VERSION);options.push([periodstyles.Flex.label,periodstyles.Flex.colour]);options.push([periodstyles.Brunch.label,periodstyles.Brunch.colour]);options.push([periodstyles.Lunch.label,periodstyles.Lunch.colour])}else switch(options[0]){default:options=null}}if(!options){options=[VERSION];for(var i=0,arr=letras,len=arr.length,l=arr[i];i<len;i++,l=arr[i])if(0!==l)options.push([periodstyles[l].label,periodstyles[l].colour])}window.addEventListener("load",e=>{var t;var n=document.querySelector("#weekwrapper");function a(){var e="",a=["S","M","T","W","&theta;","F","S"],o=t.getWeek();for(var i=0;i<7;i++){e+=`<div${o[i].today?' class="today"':""}><h1>${a[i]}</h1>`;for(var r=0,s=o[i],c=s.length,d=s[r];r<c;r++,d=s[r])e+=`<span style="background-color:${d.colour};" title="${d.label}"></span>`;e+=`</div>`}n.innerHTML=e;l()}var o=document.querySelector("#events"),i={},r="January February March April May June July August September October November December".split(" ");function l(){var e=t.offset,n=new Date;o.innerHTML=`<li><span class="secondary center">Loading</span></li>`;function a(e){var t=``;if(e.length)for(var n=0;n<e.length;n++){var a="";if(e[n].start){var i=new Date(e[n].start),r=new Date(e[n].end);a=`${(i.getHours()-1)%12+1}:${("0"+i.getMinutes()).slice(-2)}${i.getHours()<12?"a":"p"}m &ndash; ${(r.getHours()-1)%12+1}:${("0"+r.getMinutes()).slice(-2)}${r.getHours()<12?"a":"p"}m`}if(e[n].loc){if(a)a+=" &mdash; ";a+=e[n].loc}if(a)a=`<span class="secondary">${a}</span>`;t+=`<li><span class="primary">${e[n].name}</span><span class="secondary${e[n].error?" get-error":""}">${e[n].desc||""}</span>${a}</li>`}else t=`<li><span class="secondary center">No events today :(</span></li>`;o.innerHTML=t}if(i[e])a(i[e]);else ajax(`https://www.googleapis.com/calendar/v3/calendars/u5mgb2vlddfj70d7frf3r015h0@group.calendar.google.com/events?key=AIzaSyDBYs4DdIaTjYx5WDz6nfdEAftXuctZV0o&timeMin=${new Date(n.getFullYear(),n.getMonth(),n.getDate()+e).toISOString()}&timeMax=${new Date(n.getFullYear(),n.getMonth(),n.getDate()+e+1).toISOString()}&showDeleted=false&singleEvents=true&orderBy=startTime`,n=>{n=JSON.parse(n).items;for(var o=0;o<n.length;o++)n[o]={start:n[o].start.dateTime,end:n[o].end.dateTime,name:n[o].summary,desc:n[o].description,loc:n[o].location};i[e]=n;if(t.offset===e)a(i[e])},n=>{i[e]=[{name:"",desc:`${n}; couldn't get events; maybe you aren't connected to the internet?`,error:true}];if(t.offset===e)a(i[e])})}function s(e,n){if(n)alternates=JSON.parse(e);else document.querySelector("#alternateerror").innerHTML=`${e}; couldn't get alternate schedules; maybe you aren't connected to the internet?`,alternates={};for(var o=0;o<letras.length;o++)periodstyles[letras[o]]={label:options[o][0],colour:options[o][1]};t=scheduleApp({element:document.querySelector("#schedulewrapper"),periods:periodstyles,normal:normalschedule,alternates:alternates,offset:0,update:true});a()}ajax(("file:"===window.location.protocol?"https://orbiit.github.io/gunn-web-app/":"")+"json/alt-schedules-2017-18-object.json",e=>{s(e,true)},e=>{s(e,false)});var c=new DatePicker({d:14,m:7,y:2017},{d:1,m:5,y:2018}),d=new Date;c.day={d:d.getDate(),m:d.getMonth(),y:d.getFullYear()};c.onchange=(e=>{if(null!==e){var n=new Date(e.y,e.m,e.d).getTime(),o=(new Date).getTime();t.offset=Math.floor((n-o)/864e5)+1;a()}});c.wrapper.classList.add("hide");c.wrapper.style.position="fixed";document.body.appendChild(c.wrapper);document.querySelector("#datepicker").addEventListener("click",e=>{if(c.wrapper.classList.contains("hide")){c.wrapper.classList.remove("hide");function t(e){if(!c.wrapper.contains(e.target)){c.wrapper.classList.add("hide");document.removeEventListener("click",t,false)}}setTimeout(()=>{document.addEventListener("click",t,false)},0)}},false);document.querySelector("#plihieraux").addEventListener("click",e=>{var t={d:c.day.d-1,m:c.day.m,y:c.day.y};if(c.inrange(t))c.day=t},false);document.querySelector("#plimorgaux").addEventListener("click",e=>{var t={d:c.day.d+1,m:c.day.m,y:c.day.y};if(c.inrange(t))c.day=t},false);if(cookie.getItem("global.theme"))document.querySelector(`input[name=theme][value=${cookie.getItem("global.theme")}]`).checked=true;else document.querySelector("input[name=theme][value=light]").checked=true;var u="f44336 E91E63 9C27B0 673AB7 3F51B5 2196F3 03A9F4 00BCD4 009688 4CAF50 8BC34A CDDC39 FFEB3B FFC107 FF9800 FF5722 795548 9E9E9E 607D8B".split(" ");function p(e){var t=document.createElement("div"),n=document.createElement("label"),a=document.createElement("input"),o=document.createElement("div");t.classList.add("customiser-inputwrapper");n.classList.add("customiser-label");n.innerHTML=e;a.classList.add("customiser-input");a.setAttribute("aria-label","Set label for "+e);a.addEventListener("change",e=>{if(a.value)t.classList.add("filled");else t.classList.remove("filled")},false);a.addEventListener("mouseenter",e=>{t.classList.add("hover")},false);a.addEventListener("mouseleave",e=>{t.classList.remove("hover")},false);a.addEventListener("focus",e=>{t.classList.add("focus")},false);a.addEventListener("blur",e=>{t.classList.remove("focus")},false);o.classList.add("customiser-line");t.appendChild(n);t.appendChild(a);t.appendChild(o);return{wrapper:t,label:n,input:a,line:o}}function f(e){function n(a,o,i="#FF594C",r=""){var l=document.createElement("div"),s=document.createElement("button"),c=new ColourPicker(e=>{s.style.backgroundColor=e;if(window.scheduleapp)t.setPeriod(o,"",e);options[letras.indexOf(o)][1]=e;cookie.setItem("[gunn-web-app] scheduleapp.options",JSON.stringify(options));if(c.darkness()>125){s.classList.add("ripple-dark");s.classList.remove("ripple-light")}else{s.classList.add("ripple-light");s.classList.remove("ripple-dark")}}),d=p(a);l.classList.add("customiser-wrapper");ripple(s);s.classList.add("material");s.classList.add("customiser-colour");s.addEventListener("click",e=>{c.trigger(s)},false);c.colour=i;l.appendChild(s);if(r){d.input.value=r;d.wrapper.classList.add("filled")}d.input.addEventListener("change",e=>{if(t)t.setPeriod(o,d.input.value);options[letras.indexOf(o)][0]=d.input.value;cookie.setItem("[gunn-web-app] scheduleapp.options",JSON.stringify(options))},false);l.appendChild(d.wrapper);e.appendChild(l);var f=document.createElement("div");f.classList.add("customiser-colourwrapper");for(var m=0,h=u,g=h.length,v=h[m];m<g;m++,v=h[m])(e=>{var t=document.createElement("span");t.classList.add("customiser-materialcolour");t.addEventListener("click",t=>{c.colour=e},false);t.style.backgroundColor=e;f.appendChild(t)})("#"+v);var y=document.createElement("span");y.classList.add("customiser-materialcolour");y.classList.add("customiser-blackwhite");y.addEventListener("click",e=>{c.colour=document.body.classList.contains("light")?"#000000":"#ffffff"},false);f.appendChild(y);c.window.appendChild(f);return n}return n}var m=document.createDocumentFragment();f(m)("Period A","A",options[1][1],options[1][0])("Period B","B",options[2][1],options[2][0])("Period C","C",options[3][1],options[3][0])("Period D","D",options[4][1],options[4][0])("Period E","E",options[5][1],options[5][0])("Period F","F",options[6][1],options[6][0])("Period G","G",options[7][1],options[7][0])("Flex","Flex",options[8][1],options[8][0])("Brunch","Brunch",options[9][1],options[9][0])("Lunch","Lunch",options[10][1],options[10][0]);document.querySelector(".section.options").insertBefore(m,document.querySelector("#periodcustomisermarker"))},false);window.addEventListener("load",e=>{var t,n=document.querySelector("#staff"),a=document.querySelector("#staffcontact"),o=document.querySelector("#staffcontact h1"),i=document.querySelector("#staffcontact .content"),r=document.querySelector("#staffsearch"),l=document.createElement("style");document.body.appendChild(l);ajax(("file:"===window.location.protocol?"https://orbiit.github.io/gunn-web-app/":"")+"json/staff.json",e=>{t=JSON.parse(e);t["Nick Mount"]={game:true,jobTitle:"Easter Bunny",department:"Easter"};t["Josh Paley"].jobTitle="Blamed Teacher";var a=Object.keys(t).sort((e,t)=>e[e.lastIndexOf(" ")+1].charCodeAt()-t[t.lastIndexOf(" ")+1].charCodeAt()),o=``;for(var i=0,r=a,l=r.length,s=r[i];i<l;i++,s=r[i])o+=`<li data-person="${s}" data-search="${s} ${t[s].jobTitle} ${t[s].department||""}"><span class="primary">${s}</span><span class="secondary">${t[s].jobTitle}</span><span class="secondary">${t[s].department||""}</span></li>`;n.innerHTML=o;ripple("#staff li")},e=>{n.innerHTML=`<li class="error">${e}; couldn't get staff data; maybe you aren't connected to the internet?</li>`});n.addEventListener("click",e=>{var n=e.target;if("SPAN"===n.tagName)n=n.parentNode;if("LI"===n.tagName&&!n.classList.contains("error")){a.classList.add("show");var r=n.dataset.person;o.innerHTML=r;if(t[r].game){i.innerHTML=``;var l=document.createElement("button"),s=document.createElement("p"),c=+localStorage.getItem("[gunn-web-app] scheduleapp.clicks")||0;l.innerHTML="click me";l.className="material ripple-light raised";ripple(l);s.innerHTML=`${c} click(s)`;l.addEventListener("click",e=>{c++;localStorage.setItem("[gunn-web-app] scheduleapp.clicks",c);s.innerHTML=`${c} click(s)`},false);i.appendChild(l);i.appendChild(s)}else i.innerHTML=`<p><strong>Title:</strong> ${t[r].jobTitle}</p>${t[r].department?`<p><strong>Department:</strong> ${t[r].department}</p>`:""}<p><strong>Email:</strong> <a href="mailto:${t[r].email}" target="_blank" rel="noopener noreferrer">${t[r].email}</a></p><p><strong>Phone:</strong> ${t[r].phone}</p>${t[r].webpage?`<p><strong>Website:</strong> <a href="${t[r].webpage}" target="_blank" rel="noopener noreferrer">${t[r].webpage}</a></p>`:""}`}},false);r.addEventListener("input",e=>{l.innerHTML=r.value?`#staff li:not([data-search*="${r.value.replace(/\\/g,"\\")}"i]){display:none}`:""},false);var s,c=document.querySelector("#clubs"),d=document.querySelector("#clubinfo"),u=document.querySelector("#clubinfo h1"),p=document.querySelector("#clubinfo .content"),f=document.querySelector("#clubsearch"),m=document.createElement("style");document.body.appendChild(m);ajax(("file:"===window.location.protocol?"https://orbiit.github.io/gunn-web-app/":"")+"json/clubs.json",e=>{s=JSON.parse(e);var t=Object.keys(s).sort(),n=``;for(var a=0,o=t,i=o.length,r=o[a];a<i;a++,r=o[a])n+=`<li data-club="${r}" data-search="${r} ${s[r].room} ${s[r].day}"><span class="primary">${r}</span><span class="secondary">${s[r].room}</span><span class="secondary">${s[r].day}</span></li>`;c.innerHTML=n;ripple("#clubs li")},e=>{c.innerHTML=`<li class="error">${e}; couldn't get club data; maybe you aren't connected to the internet?</li>`});c.addEventListener("click",e=>{var t=e.target;if("SPAN"===t.tagName)t=t.parentNode;if("LI"===t.tagName&&!t.classList.contains("error")){d.classList.add("show");var n=t.dataset.club;u.innerHTML=n;p.innerHTML=`<p><strong>Meeting day:</strong> ${s[n].day}</p><p><strong>Meeting time:</strong> ${s[n].time}</p><p><strong>Location:</strong> ${s[n].room}</p><p><strong>Description:</strong> ${s[n].desc}</p><p><strong>President(s):</strong> ${s[n].president}</p><p><strong>Teacher Advisor(s):</strong> ${s[n].teacher}</p><p><strong>Teacher Email:</strong> <a href="mailto:${s[n].email}" target="_blank" rel="noopener noreferrer">${s[n].email}</a></p>`;var a=p.querySelectorAll("a:not([href])");for(var o=0;o<a.length;o++)a[o].href=a[o].textContent,a[o].setAttribute("target","_blank"),a[o].setAttribute("rel","noopener noreferrer")}},false);f.addEventListener("input",e=>{m.innerHTML=f.value?`#clubs li:not([data-search*="${f.value.replace(/\\/g,"\\")}"i]){display:none}`:""},false)},false);window.addEventListener("load",e=>{var t=document.querySelector("#barcode"),n=document.querySelector("#addbarcode"),a=["95012345"],o=[];if(cookie.getItem("[gunn-web-app] barcode.ids"))a=cookie.getItem("[gunn-web-app] barcode.ids").split(",");function i(){cookie.setItem("[gunn-web-app] barcode.ids",o.map(e=>e.value).join(","))}function r(e="95012345"){var n=document.createElement("li"),a=document.createElement("div"),r=document.createElement("input"),l=document.createElement("canvas"),s=document.createElement("div"),c=document.createElement("button"),d=document.createElement("button");a.classList.add("canvas");r.type="number";r.value=e;r.addEventListener("input",e=>{code39(r.value,l);i()},false);o.push(r);i();a.appendChild(r);code39(e,l);l.addEventListener("click",e=>{l.classList.remove("viewbarcode")},false);a.appendChild(l);n.appendChild(a);c.classList.add("material");c.classList.add("icon");ripple(c);c.addEventListener("click",e=>{o.splice(o.indexOf(r),1);t.removeChild(n);n=a=r=l=s=c=d=null;i()},false);c.innerHTML=`<i class="material-icons">&#xE15B;</i>`;s.appendChild(c);d.classList.add("material");d.classList.add("icon");ripple(d);d.addEventListener("click",e=>{l.classList.add("viewbarcode")},false);d.innerHTML=`<i class="material-icons">&#xE8F4;</i>`;s.appendChild(d);n.appendChild(s);return n}var l=document.createDocumentFragment();for(var s=0;s<a.length;s++)l.appendChild(r(a[s]));t.insertBefore(l,n.parentNode);n.addEventListener("click",e=>{t.insertBefore(r(),n.parentNode)},false)},false);function scheduleApp(e={}){var n,a=document.createElement("div"),o=document.createElement("div");if(e.element)n=e.element;else n=document.createElement("div");a.classList.add("schedule-container");if(!e.alternates)e.alternates={};if(!e.periods)e.periods={};if(!e.normal)e.normal={};function i(t){return e.periods[t]||{label:t,colour:"#000"}}function r(e){var t=+e.slice(0,2)%24;return`${(t-1)%12+1}:${e.slice(2)}${t<12?"a":"p"}m`}function l(e){o.style.backgroundColor=e;e=o.style.backgroundColor;e=e.slice(e.indexOf("(")+1,e.indexOf(")")).split(/,\s*/).map(e=>+e);return Math.round((299*parseInt(e[0])+587*parseInt(e[1])+114*parseInt(e[2]))/1e3)>150?"rgba(0,0,0,0.8)":"white"}function s(e){if(e<1)return"less than a minute";return(e>=120?Math.floor(e/60)+" hours":e>=60?"an hour":"")+(e%60===0?"":(e>=60?" and ":"")+(e%60===1?"a minute":e%60+" minutes"))}function c(e){return 60*+e.slice(0,2)+ +e.slice(2)}function d(e){return`<span style="background-color:${i(e).colour};color:${l(i(e).colour)};" class="schedule-endinginperiod">${i(e).label}</span>`}l("rgba(0,0,0,0.2)");var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(t=0){var n=new Date,a,o,f=true,m=n.getMinutes()+60*n.getHours();if(0!==t)n=new Date(n.getFullYear(),n.getMonth(),n.getDate()+t),f=false;o=u[n.getDay()];a=`<h2 class="schedule-dayname">${o}</h2><h3 class="schedule-date">${p[n.getMonth()]} ${n.getDate()}</h3>`;if(e.alternates[n.getMonth()+1+"-"+n.getDate()]){var h=e.alternates[n.getMonth()+1+"-"+n.getDate()];a+=`<span class="schedule-alternatemsg">This is an alternate schedule. The school says, "<strong>${h.description}</strong>"</span>`;if(h.periods.length){if(f){for(var g=0;g<h.periods.length;g++)if(m<h.periods[g].end.totalminutes)break;if(g>=h.periods.length)a+=`<p class="schedule-endingin">${d(h.periods[h.periods.length-1].name)} ended <strong>${s(m-h.periods[h.periods.length-1].end.totalminutes)}</strong> ago.</p>`;else if(m>=h.periods[g].start.totalminutes)a+=`<div class="schedule-periodprogress"><div style="width: ${(m-h.periods[g].start.totalminutes)/(h.periods[g].end.totalminutes-h.periods[g].start.totalminutes)*100}%;"></div></div><p class="schedule-endingin">${d(h.periods[g].name)} ending in <strong>${s(h.periods[g].end.totalminutes-m)}</strong>.</p>`;else if(0===g)a+=`<p class="schedule-endingin">${d(h.periods[0].name)} starting in <strong>${s(h.periods[0].start.totalminutes-m)}</strong>.</p>`;else a+=`<p class="schedule-endingin">${d(h.periods[g].name)} starting in <strong>${s(h.periods[g].start.totalminutes-m)}</strong>.</p>`}for(var v of h.periods){a+=`<div class="schedule-period" style="background-color:${i(v.name).colour};color:${l(i(v.name).colour)};"><span class="schedule-periodname">${i(v.name).label}</span><span>${r(("0"+v.start.hour).slice(-2)+("0"+v.start.minute).slice(-2))} &ndash; ${r(("0"+v.end.hour).slice(-2)+("0"+v.end.minute).slice(-2))}</span>`;if(f){a+=`<span>`;if(m>=v.end.totalminutes)a+=`Ended <strong>${s(m-v.end.totalminutes)}</strong> ago.`;else if(m<v.start.totalminutes)a+=`Starting in <strong>${s(v.start.totalminutes-m)}</strong>.`;else a+=`Ending in <strong>${s(v.end.totalminutes-m)}</strong>; started ${s(m-v.start.totalminutes)} ago.`;a+=`</span>`}a+=`</div>`}}else a+=`<span class="schedule-noschool">${i("NO_SCHOOL").label}</span>`}else if(e.normal[o]&&e.normal[o].length){if(f){for(var g=0;g<e.normal[o].length;g++)if(m<c(e.normal[o][g].end))break;if(g>=e.normal[o].length)a+=`<p class="schedule-endingin">${d(e.normal[o][e.normal[o].length-1].type)} ended <strong>${s(m-c(e.normal[o][e.normal[o].length-1].end))}</strong> ago.</p>`;else if(m>=c(e.normal[o][g].begin))a+=`<div class="schedule-periodprogress"><div style="width: ${(m-c(e.normal[o][g].begin))/(c(e.normal[o][g].end)-c(e.normal[o][g].begin))*100}%;"></div></div><p class="schedule-endingin">${d(e.normal[o][g].type)} ending in <strong>${s(c(e.normal[o][g].end)-m)}</strong>.</p>`;else if(0===g)a+=`<p class="schedule-endingin">${d(e.normal[o][0].type)} starting in <strong>${s(c(e.normal[o][0].begin)-m)}</strong>.</p>`;else a+=`<p class="schedule-endingin">${d(e.normal[o][g].type)} starting in <strong>${s(c(e.normal[o][g].begin)-m)}</strong>.</p>`}for(var v of e.normal[o]){a+=`<div class="schedule-period" style="background-color:${i(v.type).colour};color:${l(i(v.type).colour)};"><span class="schedule-periodname">${i(v.type).label}</span><span>${r(v.begin)} &ndash; ${r(v.end)}</span>`;if(f){a+=`<span>`;if(m>=c(v.end))a+=`Ended <strong>${s(m-c(v.end))}</strong> ago.`;else if(m<c(v.begin))a+=`Starting in <strong>${s(c(v.begin)-m)}</strong>.`;else a+=`Ending in <strong>${s(c(v.end)-m)}</strong>; started ${s(m-c(v.begin))} ago.`;a+=`</span>`}a+=`</div>`}}else a+=`<span class="schedule-noschool">${i("NO_SCHOOL").label}</span>`;return a}if(!e.offset)e.offset=0;function m(){if(e.update)a.innerHTML=f(e.offset)}var h={element:n,update(){e.update=true;a.innerHTML=f(e.offset);clearTimeout(g);g=setTimeout(h.update,1e3*(60-(new Date).getSeconds()));window.addEventListener("focus",m,false)},stopupdate(){e.update=false;clearTimeout(t);window.removeEventListener("focus",m,false)},get offset(){return e.offset},set offset(t){e.offset=t;a.innerHTML=f(e.offset)},setPeriod(t,n,o){if(n)e.periods[t].label=n;if(o)e.periods[t].colour=o;a.innerHTML=f(e.offset)},getWeek(){var t=new Date,n=[];today=new Date(t.getFullYear(),t.getMonth(),t.getDate()+e.offset);for(var a=0;a<7;a++){var o=new Date(today.getFullYear(),today.getMonth(),today.getDate()-today.getDay()+a),r=[];if(e.alternates[o.getMonth()+1+"-"+o.getDate()]){var l=e.alternates[o.getMonth()+1+"-"+o.getDate()];if(l.periods.length)for(var s of l.periods)r.push(i(s.name))}else{var c=e.normal[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o.getDay()]];if(c&&c.length)for(var s of c)r.push(i(s.type))}if(0===e.offset&&t.getDay()===a)r.today=true;n.push(r)}return n}};var g;if(e.update)h.update();else a.innerHTML=f(e.offset);n.appendChild(a);return h}class DatePicker{constructor(e,t,n){var a=["appendChild","createElement","getDate","getMonth","getFullYear","getTime","dataset","classList"],o=this;o.a=e;o.b=t;o.c=null;o.f=null;var i="S M T W &theta; F S".split(" "),r="jan feb mar apr may jun jul aug sep oct nov dec".split(" ");n?o.wrapper=n:o.wrapper=document[a[1]]("div");if(!/(absolute|fixed)/.test(window.getComputedStyle(o.wrapper).position))o.wrapper.style.position="relative";o.wrapper[a[7]].add("datepicker-wrapper");o.n=document[a[1]]("div");DatePicker.a(o.n)`position:absolute``display:flex``width:100%``top:0``left:0``z-index:1`;o.n[a[7]].add("datepicker-dayheadings");for(var n of i){var l=document[a[1]]("span");DatePicker.a(l)`flex: 1 0 0``text-align:center`;l[a[7]].add("datepicker-dayheading");l.innerHTML=n;o.n[a[0]](l)}o.wrapper[a[0]](o.n);o.o=document[a[1]]("div");DatePicker.a(o.o)`position:relative``height: 100%``box-sizing: border-box``overflow: auto`;o.o[a[7]].add("datepicker-days");var s=new Date(e.y,e.m,e.d),c=0,d=new Date(t.y,t.m,t.d)[a[5]](),n=s.getDay(),u=new Date(e.y,e.m,e.d-n),p=!1,f=u[a[3]]();s=s[a[5]]();while(u[a[5]]()<d){var m=document[a[1]]("div");DatePicker.a(m)`display:flex``position:relative`;m[a[7]].add("datepicker-week");for(var h=0;h<i.length;h++){var g=document[a[1]]("span");u=new Date(e.y,e.m,e.d-n+7*c+h);DatePicker.a(g)`flex: 1 0 0``text-align:center`;g[a[7]].add("datepicker-day");if(u[a[5]]()>=s&&u[a[5]]()<=d){g[a[6]].month=u[a[3]]();g[a[6]].year=u[a[4]]();if(1===(g[a[6]].date=g.innerHTML=u[a[2]]()))p=!p;if(p)g[a[7]].add("datepicker-monthalt")}else g[a[6]].notinrange="true";m[a[0]](g);if(0===h&&f!==u[a[3]]()){f=u[a[3]]();var l=document[a[1]]("span");DatePicker.a(l)`position:absolute``z-index: -1`;l[a[7]].add("datepicker-month");l.innerHTML=r[f]+(""+u[a[4]]()).slice(-2);m[a[0]](l)}}o.o[a[0]](m);c++}o.o.addEventListener("click",e=>{if(e.target[a[7]].contains("datepicker-day")&&"true"!==e.target[a[6]].notinrange)o.day={d:+e.target[a[6]].date,m:+e.target[a[6]].month,y:+e.target[a[6]].year}},!1);o.wrapper[a[0]](o.o);var n=new Date;o.o.querySelector(`.datepicker-day[data-date="${n[a[2]]()}"][data-month="${n[a[3]]()}"][data-year="${n[a[4]]()}"]`)[a[7]].add("datepicker-today")}get day(){return this.f}set day(e){var t=this;if(t.c)t.c.classList.remove("datepicker-selected");if(e&&t.inrange(e)){var n=new Date(e.y,e.m,e.d);e={d:n.getDate(),m:n.getMonth(),y:n.getFullYear()};t.c=t.o.querySelector(`.datepicker-day[data-date="${e.d}"][data-month="${e.m}"][data-year="${e.y}"]`);t.c.classList.add("datepicker-selected");t.f=e}else t.c=t.f=e=null;if(t.onchange)t.onchange(e)}inrange(e){var t="getTime",n=new Date(e.y,e.m,e.d)[t](),a=this;return!(n<new Date(a.a.y,a.a.m,a.a.d)[t]()||n>new Date(a.b.y,a.b.m,a.b.d)[t]())}static a(e){function t([n]){e.style.setProperty(n.slice(0,n.indexOf(":")),n.slice(n.indexOf(":")+1));return t}return t}}class ColourPicker{constructor(e=(()=>{})){var t=this;var n=e=>document.createElement(e),a="appendChild",o="classList";t.a=e,t.window=n("div"),t.b=n("input"),t.c=n("div"),t.d=n("div"),t.g=n("div"),t.f=n("div");ColourPicker.d(t.window)`position:fixed``opacity:0``pointer-events:none`;t.window[o].add("colourpicker-window");t.b.type="text";t.b[o].add("colourpicker-input");t.b.addEventListener("change",e=>{t.colour=t.b.value},!1);ColourPicker.d(t.c)`position:relative``background-image: linear-gradient(0deg,black,transparent), linear-gradient(90deg,white,transparent)`;t.c[o].add("colourpicker-svslider");ColourPicker.e(t.c,(e,n)=>{var a=t.c.getBoundingClientRect();e-=a.left,n-=a.top;e>a.width?e=a.width:e<0?e=0:0;n>a.height?n=a.height:n<0?n=0:0;t.d.style.left=e+"px";t.d.style.top=n+"px";t.h[1]=e/a.width*100;t.h[2]=100-n/a.height*100;t.g.style.backgroundImage=t.k();t.b.value=t.l();t.a(t.b.value)});ColourPicker.d(t.d)`position:absolute``pointer-events:none``z-index:1`;t.d[o].add("colourpicker-svindicator");ColourPicker.d(t.g)`position:relative`;t.g[o].add("colourpicker-hueslider");ColourPicker.e(t.g,(e,n)=>{var a=t.g.getBoundingClientRect();n-=a.top;n>a.height?n=a.height:n<0?n=0:0;t.f.style.top=n+"px";t.h[0]=n/a.height*360;t.c.style.backgroundColor=`hsl(${t.h[0]},100%,50%)`;t.b.value=t.l();t.a(t.b.value)});t.g.addEventListener("wheel",e=>{t.h[0]=(Math.round(e.deltaY/25)+t.h[0]+360*Math.ceil(Math.abs(e.deltaY)/360))%360;t.c.style.backgroundColor=`hsl(${t.h[0]},100%,50%)`;t.f.style.top=t.h[0]/3.6+"%";t.b.value=t.l();t.a(t.b.value)},!1);ColourPicker.d(t.f)`position:absolute``pointer-events:none``z-index:1`;t.f[o].add("colourpicker-hueindicator");t.g[a](t.f);t.c[a](t.d);t.window[a](t.b);t.window[a](t.c);t.window[a](t.g);document.body[a](t.window)}trigger(e){var t=this;ColourPicker.d(t.window)`opacity:1``pointer-events:all`;if(e){var n=e.getBoundingClientRect(),a=t.window.getBoundingClientRect();t.window.style.top=(n.bottom+a.height>window.innerHeight?n.top-a.height<0?0:n.top-a.height:n.bottom)+"px";t.window.style.left=(n.left+a.width>window.innerWidth?n.right-a.width<0?0:n.right-a.width:n.left)+"px"}var o=n=>{if(!t.window.contains(n.target)&&n.target!==e){ColourPicker.d(t.window)`opacity:0``pointer-events:none`;document.removeEventListener("click",o,!1)}};document.addEventListener("click",o,!1)}k(){var[e,t]=ColourPicker.c(this.h[1],this.h[2]);return`linear-gradient(hsl(0,${e}%,${t}%),hsl(60,${e}%,${t}%),hsl(120,${e}%,${t}%),hsl(180,${e}%,${t}%),hsl(240,${e}%,${t}%),hsl(300,${e}%,${t}%),hsl(0,${e}%,${t}%))`}l(){var[e,t,n]=ColourPicker.a(...this.h);return"#"+("0"+e.toString(16)).slice(-2)+("0"+t.toString(16)).slice(-2)+("0"+n.toString(16)).slice(-2)}set colour(e){var t=this;e=e.toUpperCase().replace(/[^0-9A-F]/g,"").slice(0,6);if(4===e.length)e=e.slice(0,3);if(3===e.length)e=e.split("").map(e=>e+e).join("");if(6===e.length){t.b.value="#"+e;t.h=ColourPicker.b(parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16));t.c.style.backgroundColor=`hsl(${t.h[0]},100%,50%)`;t.f.style.top=t.h[0]/3.6+"%";t.d.style.left=t.h[1]+"%";t.d.style.top=100-t.h[2]+"%";t.g.style.backgroundImage=t.k();t.a(t.b.value)}else t.b.value=t.l()}get colour(){return this.b.value}darkness(){var[e,t,n]=ColourPicker.a(...this.h);return Math.round((299*parseInt(e)+587*parseInt(t)+114*parseInt(n))/1e3)}static e(e,t){var n=["addEventListener","removeEventListener","preventDefault","changedTouches","mousemove","mouseup","touchmove","touchend"];e[n[0]]("mousedown",e=>{var a=e=>{t(e.clientX,e.clientY);e[n[2]]()},o=e=>{t(e.clientX,e.clientY);document[n[1]](n[4],a,!1);document[n[1]](n[5],o,!1);e[n[2]]()};document[n[0]](n[4],a,!1);document[n[0]](n[5],o,!1);e[n[2]]()},!1);e[n[0]]("touchstart",e=>{var a=e=>{t(e.touches[0].clientX,e.touches[0].clientY);e[n[2]]()},o=e=>{t(e[n[3]][0].clientX,e[n[3]][0].clientY);document[n[1]](n[6],a,{passive:!1});document[n[1]](n[7],o,{passive:!1});e[n[2]]()};document[n[0]](n[6],a,{passive:!1});document[n[0]](n[7],o,{passive:!1});e[n[2]]()},{passive:!1})}static d(e){function t([n]){e.style.setProperty(n.slice(0,n.indexOf(":")),n.slice(n.indexOf(":")+1));return t}return t}static c(e,t){e/=100,t/=100;var n=(2-e)*t;n=[Math.round(e*t/(n<=1?n:2-n)*100),Math.round(50*n)];if(isNaN(n[0]))n[0]=0;return n}static b(e,t,n){var a=Math.max(e,t,n),o=Math.min(e,t,n),i=a-o,r,l=0===a?0:i/a,s=a/255;switch(a){case o:r=0;break;case e:r=t-n+i*(t<n?6:0);r/=6*i;break;case t:r=n-e+2*i;r/=6*i;break;case n:r=e-t+4*i;r/=6*i;break}return[Math.round(360*r),Math.round(100*l),Math.round(100*s)]}static a(e,t,n){var a,o,i,r,l,s,c,d;e/=360,t/=100,n/=100,r=Math.floor(6*e),l=6*e-r,s=n*(1-t),c=n*(1-l*t),d=n*(1-(1-l)*t);switch(r%6){case 0:a=n,o=d,i=s;break;case 1:a=c,o=n,i=s;break;case 2:a=s,o=n,i=d;break;case 3:a=s,o=c,i=n;break;case 4:a=d,o=s,i=n;break;case 5:a=n,o=s,i=c;break}return[Math.round(255*a),Math.round(255*o),Math.round(255*i)]}}function code39(e,t){var n;if(t&&"CANVAS"===t.tagName)n=t;else n=document.createElement("canvas"),t=void 0;var a=n.getContext("2d");try{var o="imageRendering",i="style";n[i][o]="optimizeSpeed";n[i][o]="-moz-crisp-edges";n[i][o]="-webkit-optimize-contrast";n[i][o]="-o-crisp-edges";n[i][o]="pixelated";n[i].msInterpolationMode="nearest-neighbor"}catch(i){}e="*"+e.toUpperCase().replace(/[^A-Z0-9\-\. \+/\$%]/g,"")+"*";var r="length",l="height",s="width",c="fillRect",d="fillStyle";n[l]=100;n[s]=16*e[r]-1;if(t)a.clearRect(0,0,n[s],n[l]);a[d]="white";a[c](0,0,n[s],n[l]);a[d]="black";for(var u=0,p=0;u<e[r];u++){var f=code39.v[e[u]].toString(3);for(var m=0;m<f[r];m++)switch(f[m]){case"2":a[c](p,0,3,n[l]);p+=4;break;case"1":a[c](p,0,1,n[l]);p+=2;break;case"0":p+=2;break}}return n}code39.v={0:349,1:581,2:419,3:661,4:347,5:589,6:427,7:341,8:583,9:421,A:599,K:605,U:527,B:437,L:443,V:311,C:679,M:685,W:553,D:383,N:389,X:293,E:625,O:631,Y:535,F:463,P:469,Z:319,G:359,Q:371,"-":287,H:601,R:613,".":529,I:439,S:451," ":313,J:385,T:397,"*":295,"+":2521,"/":2467,$:2461,"%":3007};function zoomImage(e){var t="createElement",n="clientX",a="clientY",o="touches",i="preventDefault",r="addEventListener",l="removeEventListener",s=!1,c=1,d=0,u={x:0,y:0},p=document[t]("div"),f=document[t]("div"),m=m||function(...e){var t=0;for(var n=0;n<e.length;n++)t+=e[n]*e[n];return Math.sqrt(t)};f.classList.add("zoom-dial");p.classList.add("zoom-rotate");p.appendChild(f);function h(){e.style.transform=`translate(${u.x}px,${u.y}px) rotate(${d}deg) scale(${c})`;p.style.transform=`rotate(${d}deg)`}e[r]("touchstart",e=>{if(s){if(1===s.a){var t=e[o][0][n]-e[o][1][n],l=e[o][1][a]-e[o][0][a];s={a:2,b:Math.atan(t/l)/Math.PI*180+180*(l<0),c:d,d:m(e[o][0][n]-e[o][1][n],e[o][0][a]-e[o][1][a]),e:c,f:(e[o][0][n]+e[o][1][n])/2,g:(e[o][0][a]+e[o][1][a])/2,h:u.x,i:u.y}}}else{s={a:1,j:e[o][0][n],k:e[o][0][a],h:u.x,i:u.y};document[r]("touchmove",g,{passive:!1});document[r]("touchend",v,{passive:!1})}e[i]()},{passive:!1});function g(e){if(s)if(2===s.a){var t=e[o][0][n]-e[o][1][n],r=e[o][1][a]-e[o][0][a];d=s.c+Math.atan(t/r)/Math.PI*180+180*(r<0)-s.b;c=m(e[o][0][n]-e[o][1][n],e[o][0][a]-e[o][1][a])/s.d*s.e;u={x:(e[o][0][n]+e[o][1][n])/2-s.f+s.h,y:(e[o][0][a]+e[o][1][a])/2-s.g+s.i};h()}else if(1===s.a){u={x:e[o][0][n]-s.j+s.h,y:e[o][0][a]-s.k+s.i};h()}e[i]()}function v(e){s=!1;document[l]("touchmove",g,!1);document[l]("touchend",v,!1);e[i]()}e[r]("mousedown",e=>{if(!s){if(3===e.which){s={l:!0,up:0,j:e[n],k:e[a]};document.body.appendChild(p);p.style.left=e[n]+"px";p.style.top=e[a]+"px"}else s={j:e[n],k:e[a],h:u.x,i:u.y};document[r]("mousemove",y,!1);document[r]("mouseup",b,!1);e[i]()}},!1);function y(e){if(s){if(s.l){var t=e[n]-s.j,o=s.k-e[a];d=Math.atan(t/o)/Math.PI*180+180*(o<0)}else u={x:e[n]-s.j+s.h,y:e[a]-s.k+s.i};h()}e[i]()}function b(e){if(s.l&&s.up<1)s.up++;else{if(s.l)document.body.removeChild(p);s=!1;document[l]("mousemove",y,!1);document[l]("mouseup",b,!1)}e[i]()}e[r]("wheel",e=>{var t=Math.abs(e.deltaY/1e3)+1;if(e.deltaY<0)c*=t,u.x*=t,u.y*=t;else if(e.deltaY>0)c/=t,u.x/=t,u.y/=t;h();e[i]()},!1);e[r]("contextmenu",e=>{e[i]()},!1)}
